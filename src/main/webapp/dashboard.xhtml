<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:ui="jakarta.faces.facelets">
<f:view>

    <f:metadata>
        <f:viewAction action="#{dashboardController.initializeDashboard}"
                      phase="INVOKE_APPLICATION"/>
    </f:metadata>


    <h:head>
        <title>Dashboard</title>
        <style type="text/css">
            .customTable {
                width: 80%;
                border-collapse: collapse;
                margin-bottom: 15px;
            }

            .customTable th, .customTable td {
                padding: 10px;
                text-align: left;
            }

            .wideColumn {
                width: 10%; /* Adjust the percentage as needed */
            }

            .actionColumn {
                width: 15%; /* Adjust for the action buttons */
                padding-left: 10px; /* Add space between columns */
            }

            h3 {
                margin-bottom: 15px;
            }


        </style>
    </h:head>
    <h:body>
        <h:form>

            <h:panelGrid columns="2">
                <h:outputText value="Username:"/>
                <h:outputText value="#{userSessionBean.currentUser.username}"/>

                <h:outputText value="Email:"/>
                <h:outputText value="#{userSessionBean.currentUser.email}"/>

                <h:outputText value="Role:"/>
                <h:outputText value="#{userSessionBean.currentUser.role}"/>
            </h:panelGrid>

            <h:link outcome="task/create" value="Create new Task"/>

            <h:commandButton value="Logout" action="#{userSessionBean.logout}"/>


            <div class="dashboard-container">
                <!-- Role-based content -->
                <ui:fragment rendered="#{userSessionBean.manager}">
                    <ui:include src="/WEB-INF/templates/manager-content.xhtml"/>
                </ui:fragment>

                <ui:fragment rendered="#{!userSessionBean.manager}">
                    <ui:include src="/WEB-INF/templates/user-content.xhtml"/>
                </ui:fragment>

            </div>
        </h:form>


    </h:body>

</f:view>
</html>